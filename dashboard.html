<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Ink Dreams Admin</title>
    <link rel="stylesheet" href="/css/dashboard-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>INK DREAMS</h1>
                <h2>Panel de Administración</h2>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username">Usuario:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Contraseña:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
                <div class="login-help">
                    <small>Usuario: admin | Contraseña: admin123</small>
                </div>
            </form>
        </div>
    </div>

    <!-- Dashboard Main -->
    <div id="dashboard-main" class="dashboard-main hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>INK DREAMS</h2>
                <p>Admin Panel</p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" class="nav-link active" data-section="overview">
                            <i class="fas fa-chart-dashboard"></i>
                            <span>Resumen</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="appointments">
                            <i class="fas fa-calendar-check"></i>
                            <span>Citas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="waiting-list">
                            <i class="fas fa-clock"></i>
                            <span>Lista de Espera</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="calendar">
                            <i class="fas fa-calendar"></i>
                            <span>Calendario</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="artists">
                            <i class="fas fa-users"></i>
                            <span>Artistas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="clients">
                            <i class="fas fa-user-friends"></i>
                            <span>Clientes</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="reports">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reportes</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            <span>Configuración</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn btn-secondary">
                    <i class="fas fa-sign-out-alt"></i>
                    Cerrar Sesión
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="page-title">Resumen</h1>
                </div>
                <div class="header-right">
                    <div class="notifications">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                    </div>
                    <div class="user-info">
                        <span>Administrador</span>
                        <i class="fas fa-user-circle"></i>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="content-wrapper">
                <!-- Overview Section -->
                <section id="overview-section" class="content-section active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="total-appointments">0</h3>
                                <p>Citas Totales</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="pending-appointments">0</h3>
                                <p>Citas Pendientes</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-list"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="waiting-list-count">0</h3>
                                <p>Lista de Espera</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="monthly-revenue">$0</h3>
                                <p>Ingresos del Mes</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>Citas de Hoy</h3>
                                <button class="btn btn-sm btn-primary">Ver Todas</button>
                            </div>
                            <div class="card-content">
                                <div id="today-appointments" class="appointments-list">
                                    <!-- Se llenará dinámicamente -->
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>Actividad Reciente</h3>
                            </div>
                            <div class="card-content">
                                <div id="recent-activity" class="activity-list">
                                    <!-- Se llenará dinámicamente -->
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>Artistas Más Solicitados</h3>
                            </div>
                            <div class="card-content">
                                <div id="popular-artists" class="artists-stats">
                                    <!-- Se llenará dinámicamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Appointments Section -->
                <section id="appointments-section" class="content-section">
                    <div class="section-header">
                        <h2>Gestión de Citas</h2>
                        <div class="section-actions">
                            <button class="btn btn-secondary" onclick="exportAppointments()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                            <button class="btn btn-primary" onclick="showNewAppointmentModal()">
                                <i class="fas fa-plus"></i> Nueva Cita
                            </button>
                        </div>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-group">
                            <label>Estado:</label>
                            <select id="status-filter">
                                <option value="all">Todos</option>
                                <option value="pendiente">Pendiente</option>
                                <option value="confirmada">Confirmada</option>
                                <option value="completada">Completada</option>
                                <option value="cancelada">Cancelada</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Artista:</label>
                            <select id="artist-filter">
                                <option value="all">Todos</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Fecha:</label>
                            <input type="date" id="date-filter">
                        </div>
                        <button class="btn btn-secondary" onclick="clearFilters()">Limpiar</button>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Artista</th>
                                    <th>Fecha</th>
                                    <th>Hora</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="appointments-table-body">
                                <!-- Se llenará dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Waiting List Section -->
                <section id="waiting-list-section" class="content-section">
                    <div class="section-header">
                        <h2>Lista de Espera</h2>
                        <div class="section-actions">
                            <button class="btn btn-secondary" onclick="exportWaitingList()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Artista Preferido</th>
                                    <th>Urgencia</th>
                                    <th>Fecha de Registro</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="waiting-list-table-body">
                                <!-- Se llenará dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Calendar Section -->
                <section id="calendar-section" class="content-section">
                    <div class="section-header">
                        <h2>Calendario de Citas</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary" onclick="showNewAppointmentModal()">
                                <i class="fas fa-plus"></i> Nueva Cita
                            </button>
                        </div>
                    </div>
                    <div class="calendar-container">
                        <div id="calendar"></div>
                    </div>
                </section>

                <!-- Artists Section -->
                <section id="artists-section" class="content-section">
                    <div class="section-header">
                        <h2>Gestión de Artistas</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary" onclick="showNewArtistModal()">
                                <i class="fas fa-plus"></i> Nuevo Artista
                            </button>
                        </div>
                    </div>

                    <div class="artists-grid">
                        <div id="artists-cards-container">
                            <!-- Se llenará dinámicamente -->
                        </div>
                    </div>
                </section>

                <!-- Clients Section -->
                <section id="clients-section" class="content-section">
                    <div class="section-header">
                        <h2>Base de Clientes</h2>
                        <div class="section-actions">
                            <button class="btn btn-secondary" onclick="exportClients()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Email</th>
                                    <th>Teléfono</th>
                                    <th>Total Citas</th>
                                    <th>Última Cita</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="clients-table-body">
                                <!-- Se llenará dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Reports Section -->
                <section id="reports-section" class="content-section">
                    <div class="section-header">
                        <h2>Reportes y Estadísticas</h2>
                    </div>

                    <div class="reports-grid">
                        <div class="report-card">
                            <h3>Ingresos por Mes</h3>
                            <canvas id="revenue-chart"></canvas>
                        </div>
                        <div class="report-card">
                            <h3>Citas por Artista</h3>
                            <canvas id="artist-chart"></canvas>
                        </div>
                        <div class="report-card">
                            <h3>Tipos de Tatuajes Más Populares</h3>
                            <div id="popular-styles" class="styles-list">
                                <!-- Se llenará dinámicamente -->
                            </div>
                        </div>
                        <div class="report-card">
                            <h3>Horarios Más Solicitados</h3>
                            <div id="popular-times" class="times-list">
                                <!-- Se llenará dinámicamente -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings-section" class="content-section">
                    <div class="section-header">
                        <h2>Configuración del Estudio</h2>
                    </div>

                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3>Información del Estudio</h3>
                            <form id="studio-info-form">
                                <div class="form-group">
                                    <label>Nombre del Estudio:</label>
                                    <input type="text" id="studio-name" value="Ink Dreams">
                                </div>
                                <div class="form-group">
                                    <label>Dirección:</label>
                                    <input type="text" id="studio-address" value="Calle del Arte 123">
                                </div>
                                <div class="form-group">
                                    <label>Teléfono:</label>
                                    <input type="tel" id="studio-phone" value="(555) 123-4567">
                                </div>
                                <div class="form-group">
                                    <label>Email:</label>
                                    <input type="email" id="studio-email" value="info@inkdreams.com">
                                </div>
                                <button type="submit" class="btn btn-primary">Guardar</button>
                            </form>
                        </div>

                        <div class="settings-card">
                            <h3>Horarios de Atención</h3>
                            <form id="hours-form">
                                <div class="hours-grid">
                                    <div class="day-hours">
                                        <label>Lunes:</label>
                                        <input type="time" value="11:00"> - <input type="time" value="20:00">
                                    </div>
                                    <div class="day-hours">
                                        <label>Martes:</label>
                                        <input type="time" value="11:00"> - <input type="time" value="20:00">
                                    </div>
                                    <div class="day-hours">
                                        <label>Miércoles:</label>
                                        <input type="time" value="11:00"> - <input type="time" value="20:00">
                                    </div>
                                    <div class="day-hours">
                                        <label>Jueves:</label>
                                        <input type="time" value="11:00"> - <input type="time" value="20:00">
                                    </div>
                                    <div class="day-hours">
                                        <label>Viernes:</label>
                                        <input type="time" value="11:00"> - <input type="time" value="20:00">
                                    </div>
                                    <div class="day-hours">
                                        <label>Sábado:</label>
                                        <input type="time" value="11:00"> - <input type="time" value="20:00">
                                    </div>
                                    <div class="day-hours">
                                        <label>Domingo:</label>
                                        <span>Cerrado</span>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Guardar Horarios</button>
                            </form>
                        </div>

                        <div class="settings-card">
                            <h3>Configuración de Precios</h3>
                            <form id="pricing-form">
                                <div class="form-group">
                                    <label>Depósito Mínimo:</label>
                                    <input type="number" id="min-deposit" value="50">
                                </div>
                                <div class="form-group">
                                    <label>Tarifa por Hora Base:</label>
                                    <input type="number" id="base-rate" value="150">
                                </div>
                                <div class="form-group">
                                    <label>Descuento por Múltiples Sesiones (%):</label>
                                    <input type="number" id="multi-session-discount" value="10">
                                </div>
                                <button type="submit" class="btn btn-primary">Guardar Precios</button>
                            </form>
                        </div>

                        <div class="settings-card">
                            <h3>Notificaciones</h3>
                            <form id="notifications-form">
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox" checked> Email de confirmación de citas
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox" checked> Recordatorios 24h antes
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox" checked> Notificaciones de lista de espera
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox"> SMS recordatorios
                                    </label>
                                </div>
                                <button type="submit" class="btn btn-primary">Guardar Configuración</button>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- New Appointment Modal -->
    <div id="new-appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nueva Cita</h3>
                <span class="close">&times;</span>
            </div>
            <form id="new-appointment-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre del Cliente:</label>
                        <input type="text" name="clientName" required>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" name="clientEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Teléfono:</label>
                        <input type="tel" name="clientPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Artista:</label>
                        <select name="artistSelect" required>
                            <option value="">Seleccionar artista</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Fecha:</label>
                        <input type="date" name="appointmentDate" required>
                    </div>
                    <div class="form-group">
                        <label>Hora:</label>
                        <select name="appointmentTime" required>
                            <option value="">Seleccionar hora</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="12:00">12:00 PM</option>
                            <option value="13:00">1:00 PM</option>
                            <option value="14:00">2:00 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="17:00">5:00 PM</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Descripción del Tatuaje:</label>
                    <textarea name="tattooDescription" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Estado:</label>
                        <select name="status">
                            <option value="pendiente">Pendiente</option>
                            <option value="confirmada">Confirmada</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Precio Estimado:</label>
                        <input type="number" name="estimatedPrice" placeholder="$">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('new-appointment-modal')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Cita</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Appointment Modal -->
    <div id="edit-appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Cita</h3>
                <span class="close">&times;</span>
            </div>
            <form id="edit-appointment-form">
                <input type="hidden" name="appointmentId">
                <!-- Same fields as new appointment -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre del Cliente:</label>
                        <input type="text" name="clientName" required>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" name="clientEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Teléfono:</label>
                        <input type="tel" name="clientPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Artista:</label>
                        <select name="artistSelect" required>
                            <option value="">Seleccionar artista</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Fecha:</label>
                        <input type="date" name="appointmentDate" required>
                    </div>
                    <div class="form-group">
                        <label>Hora:</label>
                        <select name="appointmentTime" required>
                            <option value="">Seleccionar hora</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="12:00">12:00 PM</option>
                            <option value="13:00">1:00 PM</option>
                            <option value="14:00">2:00 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="17:00">5:00 PM</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Descripción del Tatuaje:</label>
                    <textarea name="tattooDescription" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Estado:</label>
                        <select name="status">
                            <option value="pendiente">Pendiente</option>
                            <option value="confirmada">Confirmada</option>
                            <option value="completada">Completada</option>
                            <option value="cancelada">Cancelada</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Precio Final:</label>
                        <input type="number" name="finalPrice" placeholder="$">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('edit-appointment-modal')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- New Artist Modal -->
    <div id="new-artist-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nuevo Artista</h3>
                <span class="close">&times;</span>
            </div>
            <form id="new-artist-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" name="artistName" required>
                    </div>
                    <div class="form-group">
                        <label>Especialidad:</label>
                        <input type="text" name="artistSpecialty" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Años de Experiencia:</label>
                        <input type="number" name="artistExperience" required>
                    </div>
                    <div class="form-group">
                        <label>Tarifa por Hora:</label>
                        <input type="number" name="artistRate" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Biografía:</label>
                    <textarea name="artistBio" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Instagram:</label>
                        <input type="text" name="artistInstagram" placeholder="@usuario">
                    </div>
                    <div class="form-group">
                        <label>Disponibilidad:</label>
                        <input type="text" name="artistAvailability" placeholder="Lunes - Viernes">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('new-artist-modal')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Artista</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/dashboard-script.js"></script>
</body>
</html>